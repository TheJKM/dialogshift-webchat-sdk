{"version":3,"sources":["webpack://Dialogshift/webpack/universalModuleDefinition","webpack://Dialogshift/webpack/bootstrap","webpack://Dialogshift/./src/scripts/config/config.ts","webpack://Dialogshift/./src/scripts/config/env.js","webpack://Dialogshift/./src/scripts/config/env.prod.js","webpack://Dialogshift/./src/scripts/core/app.ts","webpack://Dialogshift/./src/scripts/core/base-widget.ts","webpack://Dialogshift/./src/scripts/core/event-emitter.ts","webpack://Dialogshift/./src/scripts/core/facade.ts","webpack://Dialogshift/./src/scripts/core/observable.ts","webpack://Dialogshift/./src/scripts/core/utils.ts","webpack://Dialogshift/./src/scripts/index.ts","webpack://Dialogshift/./src/scripts/services/api.service.ts","webpack://Dialogshift/./src/scripts/services/http.service.ts","webpack://Dialogshift/./src/scripts/services/index.ts","webpack://Dialogshift/./src/scripts/widgets/button-widget.ts","webpack://Dialogshift/./src/scripts/widgets/chatbox-widget.ts","webpack://Dialogshift/./src/scripts/widgets/iframe-widget.ts","webpack://Dialogshift/./src/scripts/widgets/index.ts","webpack://Dialogshift/./src/scripts/widgets/teaser-widget.ts","webpack://Dialogshift/./src/scripts/widgets/unread-widget.ts","webpack://Dialogshift/./src/scripts/widgets/wrapper-widget.ts"],"names":[],"mappings":"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","file":"dialogshift-webchat-sdk.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Dialogshift\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dialogshift\"] = factory();\n\telse\n\t\troot[\"Dialogshift\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/scripts/index.ts\");\n","import { environment } from './env'\n\nexport const config = {\n  wrapperCls: 'ds-wrapper',\n  wrapperNoButtonCls: 'ds-wrapper--no-button',\n  wrapperPositionLeftCls: 'ds-wrapper--pl',\n  wrapperPositionRightCls: 'ds-wrapper--pr',\n\n  buttonCls: 'ds-button',\n  buttonLogoCls: 'ds-button--logo',\n  buttonWithTextCls: 'ds-button--with-text',\n  buttonActiveCls: 'ds-button--active',\n\n  chatCls: 'ds-chat',\n  chatLoadingCls: 'ds-chat--loading',\n  chatIsOpen: 'ds-chat--opened',\n\n  iframeCls: 'ds-iframe',\n\n  teaserCls: 'ds-teaser',\n  teaserCrossCls: 'ds-teaser__cross',\n  teaserTextCls: 'ds-teaser__text',\n\n  unreadCls: 'ds-unread',\n\n  env: environment,\n}\n","export * from './env.prod'\n","export const environment = {\n  apiEndpoint: 'https://core.prod.co25.net:5001',\n  iframeHost: 'https://webchat.dialogshift.com',\n}\n","import { config } from '../config/config'\nimport { EventEmitter } from './event-emitter'\nimport {\n  WrapperWidget,\n  ButtonWidget,\n  ChatboxWidget,\n  IframeWidget,\n  TeaserWidget,\n  // UnreadWidget,\n} from '../widgets/index'\nimport { ApiService } from '../services'\nimport { getUrlParam, isExternalUrl, injectCss } from './utils'\n\nexport interface ChatConfig {\n  ga: string\n  showFooter: boolean\n  teaserText?: {\n    de: string\n    en: string,\n  }\n  websiteElementCss?: string\n}\n\nexport interface Visitor {\n  id: string\n}\n\nexport enum ChatPosition {\n  left = 'left',\n  right = 'right',\n}\n\nexport interface AppOptions {\n  id: string\n  visitorId?: string\n  locale?: string\n  position?: ChatPosition\n  isChatboxVisible?: boolean\n  isButtonVisible?: boolean\n  isTeaserVisible?: boolean\n  renderButton?: boolean\n  buttonText?: string\n  teaserText?: string\n  showFooter?: boolean\n  initialElement: string\n}\n\nconst appOptionsDefault = {\n  locale: 'en',\n  position: ChatPosition.right,\n  isChatboxVisible: false,\n  isButtonVisible: true,\n  isTeaserVisible: false,\n  renderButton: true,\n  showFooter: true,\n  initialElement: '',\n}\n\nexport enum ActionEventType {\n  action = 'action',\n  message = 'message',\n}\n\nexport enum ActionEventName {\n  userReady = 'user.ready',\n  tabOpen = 'tab.open',\n}\n\nexport interface ActionEvent {\n  type: ActionEventType\n  name: string\n  payload: { [key: string]: any }\n}\n\nexport class App {\n  private options: AppOptions\n  private wrapperWidget: WrapperWidget\n  private buttonWidget: ButtonWidget\n  private chatboxWidget: ChatboxWidget\n  private iframeWidget: IframeWidget\n  private teaserWidget: TeaserWidget\n  // private unreadWidget: UnreadWidget\n  private broadcast: EventEmitter\n  private visitor: Visitor\n  private apiService: ApiService\n  private chatConfig: ChatConfig\n\n  constructor(options: AppOptions) {\n    if (!options) {\n      throw Error('Please provide Dialogshift chat configuration')\n    }\n\n    if (!options.id) {\n      throw Error('Dialogshift chat id is undefined.')\n    }\n\n    this.apiService = new ApiService()\n    this.options = Object.assign(appOptionsDefault, options)\n    this.broadcast = new EventEmitter()\n\n    this.init()\n  }\n\n  private init() {\n    const openUrlParam = getUrlParam('dschat')\n\n    if (openUrlParam === 'open') {\n      this.options.isChatboxVisible = true\n    }\n\n    this.loadConfig().then(() => {\n      this.render()\n      this.bindEvents()\n    })\n  }\n\n  private render() {\n    this.renderWrapperWidget()\n\n    if (this.options.renderButton) {\n      this.renderButtonWidget()\n    }\n\n    this.createIframeWidget()\n    this.renderTeaserWidget()\n    this.renderChatboxWidget()\n    // this.renderUnreadWidget()\n  }\n\n  private bindEvents() {\n    window.addEventListener('message', event => {\n      if (event.origin === (config as any).env.iframeHost) {\n        const message = event.data as ActionEvent\n\n        if (message.type === ActionEventType.message) {\n          this.broadcast.fire(message.name, message.payload)\n        }\n\n        if (message.type === ActionEventType.action) {\n          this.proceedActionEvent(message)\n        }\n      }\n    })\n  }\n\n  private proceedActionEvent(message: any) {\n    if (message.name === ActionEventName.userReady) {\n      this.visitor = { id: message.payload.id }\n    }\n\n    if (message.name === ActionEventName.tabOpen) {\n      let url = message.payload.targetUrl\n\n      if (message.payload.urlType === 'openSameTab') {\n        if (!isExternalUrl(url)) {\n          url += `${url.split('?')[1] ? '&' : '?'}dschat=open`\n        }\n        window.open(url, '_self')\n      }\n\n      if (message.payload.urlType === 'openNewTab') {\n        window.open(url, '_blank')\n      }\n    }\n  }\n\n  private renderChatboxWidget() {\n    this.chatboxWidget = new ChatboxWidget({\n      visible: this.options.isChatboxVisible,\n      events: [\n        {\n          type: 'before:show',\n          callback: () => {\n            this.broadcast.fire('chatbox.show.before')\n\n            this.teaserWidget.hide()\n\n            if (this.buttonWidget) {\n              this.buttonWidget.setState('active')\n            }\n\n            if (!this.iframeWidget.isRendered()) {\n              this.iframeWidget.render(this.chatboxWidget.getBoxElem())\n            }\n\n            if (!this.iframeWidget.isLoaded()) {\n              this.iframeWidget.load()\n            }\n          },\n        },\n        {\n          type: 'show',\n          callback: () => this.broadcast.fire('chatbox.show'),\n        },\n        {\n          type: 'before:hide',\n          callback: () => {\n            this.broadcast.fire('chatbox.hide.before')\n\n            if (this.options.isTeaserVisible) {\n              this.teaserWidget.show()\n            }\n\n            this.buttonWidget.setState('default')\n          },\n        },\n        {\n          type: 'hide',\n          callback: () => {\n            this.broadcast.fire('chatbox.hide')\n          },\n        },\n      ],\n    })\n\n    this.chatboxWidget.render(this.wrapperWidget.getBoxElem())\n\n    this.broadcast.on('ready', () => {\n      this.chatboxWidget.setState('ready')\n    })\n  }\n\n  private renderButtonWidget() {\n    this.buttonWidget = new ButtonWidget({\n      content: this.options.buttonText,\n      renderTo: this.wrapperWidget.getBoxElem(),\n      visible: this.options.isButtonVisible,\n      events: [\n        {\n          type: 'toggle',\n          callback: event => {\n            event.data.isPressed\n              ? this.chatboxWidget.show()\n              : this.chatboxWidget.hide()\n          },\n        },\n        {\n          type: 'before:show',\n          callback: event => this.broadcast.fire('button.show.before'),\n        },\n        {\n          type: 'show',\n          callback: event => this.broadcast.fire('button.show'),\n        },\n        {\n          type: 'before:hide',\n          callback: event => this.broadcast.fire('button.hide.before'),\n        },\n        {\n          type: 'hide',\n          callback: event => this.broadcast.fire('button.hide'),\n        },\n      ],\n    })\n  }\n\n  private renderWrapperWidget() {\n    this.wrapperWidget = new WrapperWidget({\n      renderTo: document.body,\n      position: this.options.position,\n    })\n\n    if (!this.options.renderButton) {\n      this.wrapperWidget.addCls(config.wrapperNoButtonCls)\n    }\n  }\n\n  private createIframeWidget() {\n    this.iframeWidget = new IframeWidget({\n      host: (config as any).env.iframeHost,\n      id: this.options.id,\n      initialElement: this.options.initialElement,\n      locale: this.options.locale,\n    })\n  }\n\n  private renderTeaserWidget() {\n    this.teaserWidget = new TeaserWidget({\n      renderTo: this.wrapperWidget.getBoxElem(),\n      content: this.options.teaserText,\n      visible: this.options.isTeaserVisible,\n      events: [\n        {\n          type: 'before:show',\n          callback: event => this.broadcast.fire('teaser.show.before'),\n        },\n        {\n          type: 'show',\n          callback: event => this.broadcast.fire('teaser.show'),\n        },\n        {\n          type: 'before:hide',\n          callback: event => this.broadcast.fire('teaser.hide.before'),\n        },\n        {\n          type: 'hide',\n          callback: event => this.broadcast.fire('teaser.hide'),\n        },\n      ],\n    })\n  }\n\n  // private renderUnreadWidget() {\n  //   this.unreadWidget = new UnreadWidget({\n  //     renderTo: this.wrapperWidget.getBoxElem(),\n  //     content: 10,\n  //     visible: true,\n  //   })\n  // }\n\n  private loadConfig(): Promise<ChatConfig> {\n    return this.apiService.getConfig(this.options.id).then((data: any) => {\n      this.chatConfig = {\n        ga: data.ga,\n        showFooter: data.showFooter,\n        teaserText: data.teaserText,\n        websiteElementCss: data.websiteElementCss,\n      }\n\n      if (data.websiteElementCss) {\n        injectCss(data.websiteElementCss)\n      }\n\n      if (\n        !this.options.teaserText &&\n        data.teaserText &&\n        data.teaserText[this.options.locale]\n      ) {\n        this.options.teaserText = data.teaserText[this.options.locale]\n      }\n\n      this.broadcast.fire('init')\n\n      return this.chatConfig\n    })\n  }\n\n  getBroadcast(): EventEmitter {\n    return this.broadcast\n  }\n\n  getWrapperWidget(): WrapperWidget {\n    return this.wrapperWidget\n  }\n\n  getChatboxWidget(): ChatboxWidget {\n    return this.chatboxWidget\n  }\n\n  getButtonWidget(): ButtonWidget {\n    return this.buttonWidget\n  }\n\n  getTeaserWidget(): TeaserWidget {\n    return this.teaserWidget\n  }\n\n  getContext(key: string): Promise<any> {\n    return this.apiService.getContext(this.getVisitor().id, key)\n  }\n\n  setContext(key: string, value: any): Promise<any> {\n    return this.apiService.setContext(this.getVisitor().id, key, value)\n  }\n\n  getVisitor(): Visitor {\n    return this.visitor\n  }\n\n  getConfig(): ChatConfig {\n    return this.chatConfig\n  }\n}\n","import { Observable, ObservableOptions } from './observable'\n\nexport interface BaseWidgetOptions extends ObservableOptions {\n  visible?: boolean\n  baseCls?: string\n  renderTo?: HTMLElement\n  animationDelay?: number\n  content?: string | number\n}\n\nexport class BaseWidget extends Observable {\n  private visible = true\n  private baseCls = ''\n  private renderTo: HTMLElement\n  private animationDelay = 250\n  private boxElem: HTMLElement\n  private contentElem: HTMLElement\n  private content: string\n\n  constructor(options: BaseWidgetOptions) {\n    super({ events: options.events })\n\n    Object.assign(this, options)\n\n    if (this.renderTo) {\n      this.render()\n    }\n  }\n\n  isVisible(): boolean {\n    return this.visible\n  }\n\n  getBaseCls(): string {\n    return this.baseCls\n  }\n\n  createNode(): HTMLElement {\n    return document.createElement('div')\n  }\n\n  getBoxElem(): HTMLElement {\n    if (!this.boxElem) {\n      this.boxElem = this.createNode()\n\n      if (this.getBaseCls()) {\n        this.boxElem.classList.add(this.getBaseCls())\n      }\n    }\n\n    return this.boxElem\n  }\n\n  getContentElem(): HTMLElement {\n    if (!this.contentElem) {\n      this.contentElem = this.createNode()\n\n      if (this.getBaseCls()) {\n        this.contentElem.classList.add(`${this.getBaseCls()}__content`)\n      }\n\n      this.getBoxElem().appendChild(this.contentElem)\n    }\n\n    return this.contentElem\n  }\n\n  render(renderTo?: HTMLElement) {\n    if (!renderTo && !this.renderTo) {\n      throw Error('Please provide parent node to render widget')\n    }\n\n    if (this.isRendered()) {\n      return\n    }\n\n    let renderToNode = this.renderTo\n    if (renderTo) {\n      renderToNode = renderTo\n    }\n\n    this.fire('before:render')\n\n    const boxElem = this.getBoxElem()\n\n    if (!this.visible) {\n      boxElem.style.display = 'none'\n      boxElem.style.opacity = '0'\n    }\n\n    if (this.content) {\n      this.setContent(this.content)\n    }\n\n    renderToNode.appendChild(boxElem)\n\n    this.fire('render')\n\n    if (this.visible) {\n      this.visible = false\n      this.show()\n    }\n  }\n\n  isRendered(): boolean {\n    return this.boxElem && document.body.contains(this.boxElem)\n  }\n\n  show() {\n    if (this.isVisible()) {\n      return\n    }\n\n    this.fire('before:show')\n    this.visible = true\n\n    const boxElem = this.getBoxElem()\n    boxElem.style.display = 'block'\n\n    setTimeout(() => {\n      boxElem.style.opacity = '1'\n    })\n    setTimeout(() => this.fire('show'), this.animationDelay)\n  }\n\n  hide() {\n    if (!this.isVisible()) {\n      return\n    }\n\n    this.fire('before:hide')\n    this.visible = false\n\n    const boxElem = this.getBoxElem()\n    boxElem.style.opacity = '0'\n\n    setTimeout(() => {\n      boxElem.style.display = 'none'\n\n      this.fire('hide')\n    },         this.animationDelay)\n  }\n\n  addCls(cls: string) {\n    this.getBoxElem().classList.add(cls)\n  }\n\n  removeCls(cls: string) {\n    this.getBoxElem().classList.remove(cls)\n  }\n\n  setContent(content: string, safe = false) {\n    this.content = content\n\n    if (safe) {\n      this.getContentElem().innerText = content\n    } else {\n      this.getContentElem().innerHTML = content\n    }\n  }\n}\n","/**\n * A simple and lightweight EventEmitter by TypeScript for Node.js or Browsers.\n *\n * @author billjs\n * @see https://github.com/billjs/event-emitter\n * @license MIT(https://opensource.org/licenses/MIT)\n */\n\n/**\n * EventHandler\n *\n * @export\n */\nexport type EventHandler = ((evt: Event) => void) & { _once?: boolean }\n\n/**\n * Event Object\n *\n * @export\n * @interface Event\n */\nexport interface Event {\n  /**\n   * event type\n   *\n   * @type {string}\n   * @memberof Event\n   */\n  type: string\n\n  /**\n   * event data\n   *\n   * @type {*}\n   * @memberof Event\n   */\n  data: any\n\n  /**\n   * the timestamp when event fired\n   *\n   * @type {number}\n   * @memberof Event\n   */\n  timestamp: number\n\n  /**\n   * it is an once event, that meaning listen off after event fired\n   *\n   * @type {boolean}\n   * @memberof Event\n   */\n  once: boolean\n}\n\n/**\n * It's a class for managing events.\n * It can be extended to provide event functionality for other classes or object.\n *\n * @export\n * @class EventEmitter\n */\nexport class EventEmitter {\n  /**\n   * the all event handlers are added.\n   * it's a Map data structure(key-value), the key is event type, and the value is event handler.\n   *\n   * @memberof EventEmitter\n   */\n  eventHandlers: Record<string, EventHandler[] | undefined> = {}\n\n  /**\n   * event type validator.\n   *\n   * @param {string} type event type\n   * @returns {boolean}\n   * @memberof EventEmitter\n   */\n  isValidType(type: string) {\n    return typeof type === 'string'\n  }\n\n  /**\n   * event handler validator.\n   *\n   * @param {EventHandler} handler event handler\n   * @returns {boolean}\n   * @memberof EventEmitter\n   */\n  isValidHandler(handler: EventHandler) {\n    return typeof handler === 'function'\n  }\n\n  /**\n   * listen on a new event by type and handler.\n   * if listen on, the true is returned, otherwise the false.\n   * The handler will not be listen if it is a duplicate.\n   *\n   * @param {string} type event type, it must be a unique string.\n   * @param {EventHandler} handler event handler, when if the same handler is passed,\n   * listen it by only once.\n   * @returns {boolean}\n   * @memberof EventEmitter\n   * @example\n   *  const emitter = new EventEmitter();\n   *  emitter.on('change:name', evt => {\n   *    console.log(evt);\n   *  });\n   */\n  on(type: string, handler: EventHandler) {\n    if (!type || !handler) return false\n\n    if (!this.isValidType(type)) return false\n    if (!this.isValidHandler(handler)) return false\n\n    let handlers = this.eventHandlers[type]\n    if (!handlers) handlers = this.eventHandlers[type] = []\n\n    // when the same handler is passed, listen it by only once.\n    if (handlers.indexOf(handler) >= 0) return false\n\n    handler._once = false\n    handlers.push(handler)\n    return true\n  }\n\n  /**\n   * listen on an once event by type and handler.\n   * when the event is fired, that will be listen off immediately and automatically.\n   * The handler will not be listen if it is a duplicate.\n   *\n   * @param {string} type event type, it must be a unique string.\n   * @param {EventHandler} handler event handler,\n   * when if the same handler is passed, listen it by only once.\n   * @returns {boolean}\n   * @memberof EventEmitter\n   * @example\n   *  const emitter = new EventEmitter();\n   *  emitter.once('change:name', evt => {\n   *    console.log(evt);\n   *  });\n   */\n  once(type: string, handler: EventHandler) {\n    if (!type || !handler) return false\n\n    if (!this.isValidType(type)) return false\n    if (!this.isValidHandler(handler)) return false\n\n    const ret = this.on(type, handler)\n    if (ret) {\n      // set `_once` private property after listened,\n      // avoid to modify event handler that has been listened.\n      handler._once = true\n    }\n\n    return ret\n  }\n\n  /**\n   * listen off an event by type and handler.\n   * or listen off events by type, when if only type argument is passed.\n   * or listen off all events, when if no arguments are passed.\n   *\n   * @param {string} [type] event type\n   * @param {EventHandler} [handler] event handler\n   * @returns\n   * @memberof EventEmitter\n   * @example\n   *  const emitter = new EventEmitter();\n   *  // listen off the specified event\n   *  emitter.off('change:name', evt => {\n   *    console.log(evt);\n   *  });\n   *  // listen off events by type\n   *  emitter.off('change:name');\n   *  // listen off all events\n   *  emitter.off();\n   */\n  off(type?: string, handler?: EventHandler) {\n    // listen off all events, when if no arguments are passed.\n    // it does samething as `offAll` method.\n    if (!type) return this.offAll()\n\n    // listen off events by type, when if only type argument is passed.\n    if (!handler) {\n      this.eventHandlers[type] = []\n      return\n    }\n\n    if (!this.isValidType(type)) return\n    if (!this.isValidHandler(handler)) return\n\n    const handlers = this.eventHandlers[type]\n    if (!handlers || !handlers.length) return\n\n    // otherwise, listen off the specified event.\n    for (let i = 0; i < handlers.length; i++) {\n      const fn = handlers[i]\n      if (fn === handler) {\n        handlers.splice(i, 1)\n        break\n      }\n    }\n  }\n\n  /**\n   * listen off all events, that means every event will be emptied.\n   *\n   * @memberof EventEmitter\n   * @example\n   *  const emitter = new EventEmitter();\n   *  emitter.offAll();\n   */\n  offAll() {\n    this.eventHandlers = {}\n  }\n\n  /**\n   * fire the specified event, and you can to pass a data.\n   * When fired, every handler attached to that event will be executed.\n   * But, if it's an once event, listen off it immediately after called handler.\n   *\n   * @param {string} type event type\n   * @param {*} [data] event data\n   * @returns\n   * @memberof EventEmitter\n   * @example\n   *  const emitter = new EventEmitter();\n   *  emitter.fire('change:name', 'new name');\n   */\n  fire(type: string, data?: any) {\n    if (!type || !this.isValidType(type)) return\n\n    const handlers = this.eventHandlers[type]\n    if (!handlers || !handlers.length) return\n\n    const event = this.createEvent(type, data)\n\n    for (const handler of handlers) {\n      if (!this.isValidHandler(handler)) continue\n      if (handler._once) event.once = true\n\n      // call event handler, and pass the event argument.\n      handler(event)\n\n      // if it's an once event, listen off it immediately after called handler.\n      if (event.once) this.off(type, handler)\n    }\n  }\n\n  /**\n   * check whether the specified event has been listen on.\n   * or check whether the events by type has been listen on, when if only `type` argument is passed.\n   *\n   * @param {string} type event type\n   * @param {EventHandler} [handler] event handler, optional\n   * @returns {boolean}\n   * @memberof EventEmitter\n   * @example\n   *  const emitter = new EventEmitter();\n   *  const result = emitter.has('change:name');\n   */\n  has(type: string, handler?: EventHandler) {\n    if (!type || !this.isValidType(type)) return false\n\n    const handlers = this.eventHandlers[type]\n    // if there are no any events, return false.\n    if (!handlers || !handlers.length) return false\n\n    // at lest one event, and no pass `handler` argument, then return true.\n    if (!handler || !this.isValidHandler(handler)) return true\n\n    // otherwise, need to traverse the handlers.\n    return handlers.indexOf(handler) >= 0\n  }\n\n  /**\n   * get the handlers for the specified event type.\n   *\n   * @param {string} type event type\n   * @returns {EventHandler[]}\n   * @memberof EventEmitter\n   * @example\n   *  const emitter = new EventEmitter();\n   *  const handlers = emitter.getHandlers('change:name');\n   *  console.log(handlers);\n   */\n  getHandlers(type: string) {\n    if (!type || !this.isValidType(type)) return []\n    return this.eventHandlers[type] || []\n  }\n\n  /**\n   * create event object.\n   *\n   * @param {string} type event type\n   * @param {*} [data] event data\n   * @param {boolean} [once=false] is it an once event?\n   * @returns {Event}\n   * @memberof EventEmitter\n   */\n  createEvent(type: string, data?: any, once = false) {\n    const event: Event = { type, data, once, timestamp: Date.now() }\n    return event\n  }\n}\n","import { EventHandler } from './event-emitter'\nimport { App, ChatPosition } from './app'\n\nexport const createFacade = (instance: App) => {\n  return {\n    on(type: string, handler: EventHandler) {\n      instance.getBroadcast().on(type, handler)\n    },\n\n    once(type: string, handler: EventHandler) {\n      instance.getBroadcast().once(type, handler)\n    },\n\n    off(type?: string, handler?: EventHandler) {\n      instance.getBroadcast().off(type, handler)\n    },\n\n    offAll() {\n      instance.getBroadcast().offAll()\n    },\n\n    showChatbox() {\n      instance.getChatboxWidget().show()\n    },\n\n    hideChatbox() {\n      instance.getChatboxWidget().hide()\n    },\n\n    showButton() {\n      instance.getButtonWidget().show()\n    },\n\n    hideButton() {\n      instance.getButtonWidget().hide()\n    },\n\n    setButtonText(text: string) {\n      instance.getButtonWidget().setContent(text)\n    },\n\n    showTeaser() {\n      instance.getTeaserWidget().show()\n    },\n\n    hideTeaser() {\n      instance.getTeaserWidget().hide()\n    },\n\n    setTeaserText(text: string) {\n      instance.getTeaserWidget().setContent(text)\n    },\n\n    setPosition(position: ChatPosition) {\n      instance.getWrapperWidget().setPosition(position)\n    },\n\n    getContext(key: string): Promise<any> {\n      return instance.getContext(key)\n    },\n\n    setContext(key: string, value: any): Promise<any> {\n      return instance.setContext(key, value)\n    },\n\n    getVisitor() {\n      return instance.getVisitor()\n    },\n\n    getConfig() {\n      return instance.getConfig()\n    },\n  }\n}\n","import { EventEmitter, EventHandler } from './event-emitter'\n\nexport interface ObservableEvent {\n  type: string\n  callback: EventHandler\n  once?: boolean\n}\n\nexport interface ObservableOptions {\n  events?: ObservableEvent[]\n}\n\nexport class Observable extends EventEmitter {\n  constructor(options: ObservableOptions) {\n    super()\n    const events = options.events || []\n\n    events.forEach(item => {\n      if (item.once) {\n        this.once(item.type, item.callback)\n      } else {\n        this.on(item.type, item.callback)\n      }\n    })\n  }\n}\n","export const getUrlParam = (\n  name: string,\n  defaultReturn = null,\n): string | null => {\n  const url = new URL(location.href)\n  const param = url.searchParams.get(name)\n\n  if (param && param.length >= 1) {\n    return param\n  }\n\n  return defaultReturn\n}\n\nexport const isExternalUrl = (url): boolean => {\n  const match = url.match(\n    /^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/,\n  )\n  if (\n    match != null &&\n    typeof match[1] === 'string' &&\n    match[1].length > 0 &&\n    match[1].toLowerCase() !== location.protocol\n  ) {\n    return true\n  }\n\n  if (\n    match != null &&\n    typeof match[2] === 'string' &&\n    match[2].length > 0 &&\n    match[2].replace(\n      new RegExp(\n        `:( + { 'http:': 80, 'https:': 443 }[${location.protocol}] + )?$`,\n      ),\n      '',\n    ) !== location.host\n  ) {\n    return true\n  }\n\n  return false\n}\n\nexport const injectCss = (css: string) => {\n  const style = document.createElement('style')\n  style.type = 'text/css'\n  style.innerHTML = css\n\n  document.querySelector('head').appendChild(style)\n}\n","import { createFacade } from './core/facade'\nimport { App, AppOptions } from './core/app'\n\nlet facade = null\nconst instance = (options?: AppOptions) => {\n  if (facade) {\n    return facade\n  }\n\n  facade = createFacade(new App(options))\n  return facade\n}\n\nexport { instance }\n","import { HttpService } from './'\nimport { config } from '../config/config'\n\nexport class ApiService {\n  private getTransport() {\n    return HttpService\n  }\n\n  getEndpoint(): string {\n    return (config as any).env.apiEndpoint\n  }\n\n  setContext(visitorId: string, key: string, value: any): Promise<Response> {\n    const context = {}\n    context[key] = value\n    const data = {\n      custid: visitorId,\n      context: JSON.stringify(context),\n    }\n\n    return this.getTransport().postRequest(\n      `${this.getEndpoint()}/config/context`,\n      data,\n    )\n  }\n\n  getContext(visitorId: string, variable: string): Promise<Response> {\n    return this.getTransport().getRequest(\n      `${this.getEndpoint()}/config/context/${visitorId}/${variable}`,\n    )\n  }\n\n  getConfig(clientId: string): Promise<Response> {\n    return this.getTransport().getRequest(\n      `${this.getEndpoint()}/config/webapp/${clientId}`,\n    )\n  }\n}\n","export class HttpService {\n  private static processError(response): Promise<any> {\n    if (response.status >= 200 && response.status < 300) {\n      return Promise.resolve(response)\n    }\n    return Promise.reject(new Error(response.statusText))\n  }\n\n  private static processJson(response) {\n    return response.json()\n  }\n\n  static getRequest(url: string): Promise<Response> {\n    return fetch(url)\n      .then(this.processError)\n      .then(this.processJson)\n  }\n\n  static postRequest(url: string, data: any = {}): Promise<Response> {\n    return fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      body: JSON.stringify(data),\n    }).then(this.processError)\n  }\n}\n","export * from './api.service'\nexport * from './http.service'\n","import { BaseWidgetOptions, BaseWidget } from '../core/base-widget'\nimport { config } from '../config/config'\n\ntype ButtonWidgetState = 'default' | 'active'\n\nexport class ButtonWidget extends BaseWidget {\n  private pressed = false\n\n  constructor(options: BaseWidgetOptions) {\n    super(options)\n  }\n\n  getBaseCls() {\n    return config.buttonCls\n  }\n\n  render() {\n    const boxElem = this.getBoxElem()\n    boxElem.classList.add(config.buttonLogoCls)\n\n    this.bindEvents()\n\n    super.render()\n  }\n\n  bindEvents() {\n    this.getBoxElem().addEventListener('click', () => {\n      this.pressed = !this.pressed\n\n      this.fire('toggle', {\n        isPressed: this.pressed,\n      })\n    })\n  }\n\n  setState(state: ButtonWidgetState) {\n    if (state === 'active') {\n      this.pressed = true\n      this.getBoxElem().classList.add(config.buttonActiveCls)\n    }\n\n    if (state === 'default') {\n      this.pressed = false\n      this.getBoxElem().classList.remove(config.buttonActiveCls)\n    }\n  }\n\n  setContent(text: string) {\n    super.setContent(text)\n\n    if (text) {\n      this.getBoxElem().classList.add(config.buttonWithTextCls)\n    } else {\n      this.getBoxElem().classList.remove(config.buttonWithTextCls)\n    }\n  }\n}\n","import { BaseWidgetOptions, BaseWidget } from '../core/base-widget'\nimport { config } from '../config/config'\n\ninterface ChatboxWidgetOptions extends BaseWidgetOptions {}\n\ntype ChatboxWidgetState = 'loading' | 'ready'\n\nexport class ChatboxWidget extends BaseWidget {\n  constructor(options: ChatboxWidgetOptions) {\n    super(options)\n\n    this.setState('loading')\n\n    this.on('before:show', () => document.body.classList.add(config.chatIsOpen))\n    this.on('before:hide', () =>\n      document.body.classList.remove(config.chatIsOpen),\n    )\n  }\n\n  getBaseCls() {\n    return config.chatCls\n  }\n\n  setState(state: ChatboxWidgetState) {\n    if (state === 'loading') {\n      this.getBoxElem().classList.add(config.chatLoadingCls)\n    }\n\n    if (state === 'ready') {\n      this.getBoxElem().classList.remove(config.chatLoadingCls)\n    }\n  }\n}\n","import { BaseWidgetOptions, BaseWidget } from '../core/base-widget'\nimport { config } from '../config/config'\n\ninterface IframeWidgetOptions extends BaseWidgetOptions {\n  host: string\n  id: string\n  customerId?: string\n  initialElement?: string\n  locale?: string\n}\n\nexport class IframeWidget extends BaseWidget {\n  private host: string\n  private id: string\n  private customerId: string\n  private loaded = false\n  private initialElement: string\n  private locale: string\n\n  constructor(options: IframeWidgetOptions) {\n    super(options)\n  }\n\n  getBaseCls(): string {\n    return config.iframeCls\n  }\n\n  getBoxElem(): HTMLIFrameElement {\n    return super.getBoxElem() as HTMLIFrameElement\n  }\n\n  isLoaded(): boolean {\n    return this.loaded\n  }\n\n  createNode(): HTMLIFrameElement {\n    return document.createElement('iframe')\n  }\n\n  buildUrl(): string {\n    let iframeUrl = `${this.host}?clid=${this.id}`\n\n    if (this.customerId) {\n      iframeUrl += `&cid=${this.customerId}`\n    }\n\n    if (this.initialElement) {\n      iframeUrl += `&init=${this.initialElement}`\n    }\n\n    if (this.locale) {\n      iframeUrl += `&lg=${this.locale}`\n    }\n\n    return iframeUrl\n  }\n\n  load() {\n    if (this.isRendered() && !this.loaded) {\n      this.loaded = true\n      this.getBoxElem().src = this.buildUrl()\n\n      this.getBoxElem().addEventListener('load', () => {\n        this.getBoxElem().contentWindow.postMessage(\n          {\n            actionId: 'setConfig',\n            payload: {\n              theme: 'theme-embed',\n            },\n          },\n          '*',\n        )\n      })\n    }\n  }\n}\n","export * from './wrapper-widget'\nexport * from './chatbox-widget'\nexport * from './button-widget'\nexport * from './iframe-widget'\nexport * from './teaser-widget'\nexport * from './unread-widget'\n","import { BaseWidgetOptions, BaseWidget } from '../core/base-widget'\nimport { config } from '../config/config'\n\nexport class TeaserWidget extends BaseWidget {\n  private crossElem: HTMLElement\n\n  constructor(options: BaseWidgetOptions) {\n    super(options)\n  }\n\n  getBaseCls() {\n    return config.teaserCls\n  }\n\n  render() {\n    this.crossElem = this.createNode()\n    this.crossElem.classList.add(config.teaserCrossCls)\n\n    this.bindEvents()\n\n    this.getBoxElem().appendChild(this.crossElem)\n\n    super.render()\n  }\n\n  bindEvents() {\n    this.crossElem.addEventListener('click', () => this.hide())\n  }\n}\n","import { BaseWidgetOptions, BaseWidget } from '../core/base-widget'\nimport { config } from '../config/config'\n\nexport class UnreadWidget extends BaseWidget {\n  constructor(options: BaseWidgetOptions) {\n    super(options)\n  }\n\n  getBaseCls() {\n    return config.unreadCls\n  }\n}\n","import { ChatPosition } from '../core/app'\nimport { BaseWidgetOptions, BaseWidget } from '../core/base-widget'\nimport { config } from '../config/config'\n\ninterface WrapperWidgetOptions extends BaseWidgetOptions {\n  position?: ChatPosition\n}\n\nexport class WrapperWidget extends BaseWidget {\n  private position: ChatPosition\n\n  constructor(options: WrapperWidgetOptions) {\n    super(options)\n  }\n\n  getBaseCls() {\n    return config.wrapperCls\n  }\n\n  setPosition(position: ChatPosition) {\n    this.position = position\n\n    const boxElem = this.getBoxElem()\n\n    boxElem.classList.remove(config.wrapperPositionLeftCls)\n    boxElem.classList.remove(config.wrapperPositionRightCls)\n\n    boxElem.classList.add(\n      position === ChatPosition.left\n        ? config.wrapperPositionLeftCls\n        : config.wrapperPositionRightCls,\n    )\n  }\n\n  render() {\n    this.setPosition(this.position)\n\n    super.render()\n  }\n}\n"],"sourceRoot":""}